<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡πÇ‡∏£‡∏Ñ‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô - ICP Ladda</title>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Sarabun', sans-serif; background: #f5f5f5; min-height: 100vh; }
        .header { background: linear-gradient(135deg, #5d4e37 0%, #8b7355 100%); color: white; padding: 15px 20px; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .header-content { max-width: 600px; margin: 0 auto; display: flex; align-items: center; gap: 15px; }
        .back-btn { background: rgba(255,255,255,0.2); border: none; color: white; width: 36px; height: 36px; border-radius: 50%; font-size: 1.2em; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .header-info { flex: 1; }
        .header h1 { font-size: 1.3em; font-weight: 700; display: flex; align-items: center; gap: 8px; }
        .header-icon { width: 28px; height: 28px; object-fit: contain; vertical-align: middle; }
        .header p { font-size: 0.85em; opacity: 0.9; }
        .category-tabs { max-width: 600px; margin: 0 auto; background: white; display: flex; border-bottom: 1px solid #eee; position: sticky; top: 66px; z-index: 99; }
        .category-tab { flex: 1; padding: 12px 8px; border: none; background: white; font-size: 0.9em; font-weight: 500; cursor: pointer; transition: all 0.3s ease; font-family: 'Sarabun', sans-serif; border-bottom: 3px solid transparent; }
        .category-tab:hover { background: #f9f9f9; }
        .category-tab.active { border-bottom-color: #8b7355; background: #faf8f5; }
        .category-tab.fungal.active { color: #8B4513; border-bottom-color: #8B4513; }
        .category-tab.bacterial.active { color: #DC143C; border-bottom-color: #DC143C; }
        .category-tab.viral.active { color: #9932CC; border-bottom-color: #9932CC; }
        .category-tab.pest.active { color: #FF6B00; border-bottom-color: #FF6B00; }
        .content { max-width: 600px; margin: 0 auto; padding: 15px 20px 100px; }
        .category-section { display: none; }
        .category-section.active { display: block; }
        .section-header { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid #eee; }
        .section-icon { font-size: 1.5em; }
        .section-title { font-size: 1.15em; font-weight: 600; color: #333; }
        .section-count { margin-left: auto; font-size: 0.85em; color: #888; background: #f0f0f0; padding: 3px 10px; border-radius: 10px; }
        .disease-list { display: flex; flex-direction: column; gap: 12px; }
        .disease-card { background: white; border-radius: 15px; padding: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); cursor: pointer; transition: all 0.3s ease; border-left: 4px solid #8b7355; }
        .disease-card:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(0,0,0,0.12); }
        .disease-card.fungal { border-left-color: #8B4513; }
        .disease-card.bacterial { border-left-color: #DC143C; }
        .disease-card.viral { border-left-color: #9932CC; }
        .disease-card.pest { border-left-color: #FF6B00; }
        .disease-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
        .disease-name { font-size: 1.1em; font-weight: 600; color: #333; }
        .disease-name-en { font-size: 0.85em; color: #666; font-style: italic; }
        .disease-symptoms { font-size: 0.9em; color: #555; line-height: 1.5; margin-bottom: 10px; }
        .disease-tags { display: flex; gap: 8px; flex-wrap: wrap; }
        .tag { font-size: 0.75em; padding: 4px 10px; border-radius: 12px; background: #f5f0e8; color: #5d4e37; }
        .tag.pathogen { background: #e3f2fd; color: #1565c0; }
        .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; padding: 20px; overflow-y: auto; }
        .modal.active { display: flex; align-items: flex-start; justify-content: center; }
        .modal-content { background: white; border-radius: 20px; width: 100%; max-width: 500px; margin: 20px 0; animation: slideUp 0.3s ease; }
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .modal-header { padding: 20px; border-bottom: 1px solid #eee; }
        .modal-header h2 { font-size: 1.3em; color: #333; margin-bottom: 5px; }
        .modal-header p { font-size: 0.9em; color: #666; font-style: italic; }
        .modal-body { padding: 20px; }
        .detail-section { margin-bottom: 20px; }
        .detail-section:last-child { margin-bottom: 0; }
        .detail-title { font-size: 1em; font-weight: 600; color: #5d4e37; margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }
        .detail-content { font-size: 0.95em; color: #444; line-height: 1.6; }
        .detail-list { list-style: none; padding-left: 0; }
        .detail-list li { padding: 6px 0; padding-left: 20px; position: relative; }
        .detail-list li::before { content: "‚Ä¢"; position: absolute; left: 0; color: #8b7355; font-weight: bold; }
        .modal-footer { padding: 15px 20px; border-top: 1px solid #eee; display: flex; gap: 10px; }
        .modal-btn { flex: 1; padding: 12px; border: none; border-radius: 10px; font-size: 0.95em; font-weight: 600; cursor: pointer; font-family: 'Sarabun', sans-serif; }
        .modal-btn.close { background: #f0f0f0; color: #333; }
        .modal-btn.primary { background: #8b7355; color: white; }
        .footer { position: fixed; bottom: 0; left: 0; right: 0; background: white; padding: 15px 20px; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); }
        .footer-content { max-width: 600px; margin: 0 auto; display: flex; gap: 10px; }
        .footer-btn { flex: 1; padding: 12px; border: none; border-radius: 10px; font-size: 0.95em; font-weight: 600; cursor: pointer; font-family: 'Sarabun', sans-serif; transition: all 0.3s ease; }
        .footer-btn.primary { background: #8b7355; color: white; }
        .footer-btn.secondary { background: #f0f0f0; color: #333; }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <button class="back-btn" onclick="goBack()">‚Üê</button>
            <div class="header-info">
                <h1><img src="assets/durian_nobg-removebg-preview.png" alt="‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" class="header-icon"> ‡πÇ‡∏£‡∏Ñ‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h1>
                <p>Durian Diseases</p>
            </div>
        </div>
    </div>

    <div class="category-tabs">
        <button class="category-tab fungal active" onclick="showCategory('fungal')">‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤</button>
        <button class="category-tab viral" onclick="showCategory('viral')">‡πÑ‡∏ß‡∏£‡∏±‡∏™</button>
        <button class="category-tab pest" onclick="showCategory('pest')">‡πÅ‡∏°‡∏•‡∏á</button>
    </div>

    <div class="content">
        <!-- Fungal -->
        <div class="category-section active" id="fungal-section">
            <div class="section-header">
                <span class="section-icon">üçÑ</span>
                <span class="section-title">‡πÇ‡∏£‡∏Ñ‡∏à‡∏≤‡∏Å‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤</span>
                <span class="section-count">7 ‡πÇ‡∏£‡∏Ñ</span>
            </div>
            <div class="disease-list">
                <div class="disease-card fungal" onclick="showDetail('phytophthora')">
                    <div class="disease-header">
                        <div>
                            <div class="disease-name">‡πÇ‡∏£‡∏Ñ‡∏£‡∏≤‡∏Å‡πÄ‡∏ô‡πà‡∏≤‡πÇ‡∏Ñ‡∏ô‡πÄ‡∏ô‡πà‡∏≤</div>
                            <div class="disease-name-en">Phytophthora Root Rot</div>
                        </div>
                    </div>
                    <div class="disease-symptoms">‡∏£‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡πÇ‡∏Ñ‡∏ô‡∏ï‡πâ‡∏ô‡πÄ‡∏ô‡πà‡∏≤‡∏î‡∏≥ ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏≠‡∏Å ‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏¢‡∏¥‡πâ‡∏°‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÅ‡∏î‡∏á ‡πÉ‡∏ö‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏£‡πà‡∏ß‡∏á</div>
                    <div class="disease-tags">
                        <span class="tag pathogen">Phytophthora palmivora</span>
                        <span class="tag">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏°‡∏≤‡∏Å</span>
                    </div>
                </div>

                <div class="disease-card fungal" onclick="showDetail('anthracnose')">
                    <div class="disease-header">
                        <div>
                            <div class="disease-name">‡πÇ‡∏£‡∏Ñ‡πÅ‡∏≠‡∏ô‡πÅ‡∏ó‡∏£‡∏Ñ‡πÇ‡∏ô‡∏™</div>
                            <div class="disease-name-en">Anthracnose</div>
                        </div>
                    </div>
                    <div class="disease-symptoms">‡∏à‡∏∏‡∏î‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏î‡∏≥‡∏ö‡∏ô‡πÉ‡∏ö ‡∏ú‡∏•‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏∏‡∏î‡∏î‡∏≥‡∏¢‡∏∏‡∏ö ‡∏°‡∏µ‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏ä‡∏∑‡πâ‡∏ô</div>
                    <div class="disease-tags">
                        <span class="tag pathogen">Colletotrichum gloeosporioides</span>
                        <span class="tag">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</span>
                    </div>
                </div>

                <div class="disease-card fungal" onclick="showDetail('algal_spot')">
                    <div class="disease-header">
                        <div>
                            <div class="disease-name">‡πÇ‡∏£‡∏Ñ‡∏£‡∏≤‡∏™‡∏≤‡∏´‡∏£‡πà‡∏≤‡∏¢</div>
                            <div class="disease-name-en">Algal Leaf Spot</div>
                        </div>
                    </div>
                    <div class="disease-symptoms">‡∏à‡∏∏‡∏î‡∏Å‡∏•‡∏°‡∏ô‡∏π‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏ó‡∏≤‡∏ö‡∏ô‡πÉ‡∏ö ‡∏ú‡∏¥‡∏ß‡∏´‡∏¢‡∏≤‡∏ö‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏Å‡∏≥‡∏°‡∏∞‡∏´‡∏¢‡∏µ‡πà</div>
                    <div class="disease-tags">
                        <span class="tag pathogen">Cephaleuros virescens</span>
                        <span class="tag">‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢</span>
                    </div>
                </div>

                <div class="disease-card fungal" onclick="showDetail('pink_disease')">
                    <div class="disease-header">
                        <div>
                            <div class="disease-name">‡πÇ‡∏£‡∏Ñ‡∏£‡∏≤‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π</div>
                            <div class="disease-name-en">Pink Disease</div>
                        </div>
                    </div>
                    <div class="disease-symptoms">‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏¥‡πà‡∏á‡∏°‡∏µ‡πÄ‡∏™‡πâ‡∏ô‡πÉ‡∏¢‡∏£‡∏≤‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π‡∏õ‡∏Å‡∏Ñ‡∏•‡∏∏‡∏° ‡∏Å‡∏¥‡πà‡∏á‡πÅ‡∏´‡πâ‡∏á‡∏ï‡∏≤‡∏¢</div>
                    <div class="disease-tags">
                        <span class="tag pathogen">Erythricium salmonicolor</span>
                        <span class="tag">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</span>
                    </div>
                </div>

                <div class="disease-card fungal" onclick="showDetail('fruit_rot')">
                    <div class="disease-header">
                        <div>
                            <div class="disease-name">‡πÇ‡∏£‡∏Ñ‡∏ú‡∏•‡πÄ‡∏ô‡πà‡∏≤</div>
                            <div class="disease-name-en">Fruit Rot</div>
                        </div>
                    </div>
                    <div class="disease-symptoms">‡∏ú‡∏•‡πÄ‡∏ô‡πà‡∏≤‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏î‡∏≥ ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏ô‡πà‡∏≤‡πÄ‡∏•‡∏∞ ‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÄ‡∏´‡∏°‡πá‡∏ô</div>
                    <div class="disease-tags">
                        <span class="tag pathogen">Phytophthora spp.</span>
                        <span class="tag">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</span>
                    </div>
                </div>

                <div class="disease-card fungal" onclick="showDetail('Durian_Leaf_Blight')">
                    <div class="disease-header">
                        <div>
                            <div class="disease-name">‡πÇ‡∏£‡∏Ñ‡πÉ‡∏ö‡∏ï‡∏¥‡∏î (‡πÉ‡∏ö‡πÑ‡∏´‡∏°‡πâ)</div>
                            <div class="disease-name-en">Durian Leaf Blight</div>
                        </div>
                    </div>
                    <div class="disease-symptoms">‡πÉ‡∏ö‡πÄ‡∏Å‡∏¥‡∏î‡πÅ‡∏ú‡∏•‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÑ‡∏´‡∏°‡πâ ‡πÉ‡∏ö‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏£‡∏∞‡∏à‡∏∏‡∏Å ‡πÅ‡∏ú‡∏•‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏£‡πá‡∏ß</div>
                    <div class="disease-tags">
                        <span class="tag pathogen">Rhizoctonia solani</span>
                        <span class="tag">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</span>
                    </div>
                </div>

                <div class="disease-card fungal" onclick="showDetail('branch_dieback')">
                    <div class="disease-header">
                        <div>
                            <div class="disease-name">‡πÇ‡∏£‡∏Ñ‡∏Å‡∏¥‡πà‡∏á‡πÅ‡∏´‡πâ‡∏á‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div>
                            <div class="disease-name-en">Branch Dieback</div>
                        </div>
                    </div>
                    <div class="disease-symptoms">‡∏Å‡∏¥‡πà‡∏á‡πÅ‡∏´‡πâ‡∏á‡∏ï‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏õ‡∏•‡∏≤‡∏¢ ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏´‡πâ‡∏á‡∏Å‡∏£‡∏≠‡∏ö ‡πÉ‡∏ö‡πÄ‡∏´‡∏µ‡πà‡∏¢‡∏ß‡∏£‡πà‡∏ß‡∏á</div>
                    <div class="disease-tags">
                        <span class="tag pathogen">Fusarium solani</span>
                        <span class="tag">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Viral -->
        <div class="category-section" id="viral-section">
            <div class="section-header">
                <span class="section-icon">üî¨</span>
                <span class="section-title">‡πÇ‡∏£‡∏Ñ‡∏à‡∏≤‡∏Å‡πÑ‡∏ß‡∏£‡∏±‡∏™</span>
                <span class="section-count">1 ‡πÇ‡∏£‡∏Ñ</span>
            </div>
            <div class="disease-list">
                <div class="disease-card viral" onclick="showDetail('mosaic')">
                    <div class="disease-header">
                        <div>
                            <div class="disease-name">‡πÇ‡∏£‡∏Ñ‡πÉ‡∏ö‡∏î‡πà‡∏≤‡∏á</div>
                            <div class="disease-name-en">Mosaic Virus</div>
                        </div>
                    </div>
                    <div class="disease-symptoms">‡πÉ‡∏ö‡∏°‡∏µ‡∏•‡∏≤‡∏¢‡∏î‡πà‡∏≤‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏≠‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏° ‡πÉ‡∏ö‡∏ö‡∏¥‡∏î‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ß ‡∏ï‡πâ‡∏ô‡πÅ‡∏Ñ‡∏£‡∏∞‡πÅ‡∏Å‡∏£‡πá‡∏ô</div>
                    <div class="disease-tags">
                        <span class="tag pathogen">Durian Mosaic Virus</span>
                        <span class="tag">‡πÄ‡∏û‡∏•‡∏µ‡πâ‡∏¢‡∏≠‡πà‡∏≠‡∏ô</span>
                        <span class="tag">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pest (‡πÅ‡∏°‡∏•‡∏á‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏û‡∏∑‡∏ä) -->
        <div class="category-section" id="pest-section">
            <div class="section-header">
                <span class="section-icon">üêõ</span>
                <span class="section-title">‡πÅ‡∏°‡∏•‡∏á‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏û‡∏∑‡∏ä</span>
                <span class="section-count">1 ‡∏ä‡∏ô‡∏¥‡∏î</span>
            </div>
            <div class="disease-list">
                <div class="disease-card pest" onclick="showDetail('fruit_borer')">
                    <div class="disease-header">
                        <div>
                            <div class="disease-name">‡∏´‡∏ô‡∏≠‡∏ô‡πÄ‡∏à‡∏≤‡∏∞‡∏ú‡∏•‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div>
                            <div class="disease-name-en">Durian Fruit Borer</div>
                        </div>
                    </div>
                    <div class="disease-symptoms">‡∏ú‡∏•‡∏ñ‡∏π‡∏Å‡πÄ‡∏à‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π ‡∏°‡∏µ‡∏°‡∏π‡∏•‡∏´‡∏ô‡∏≠‡∏ô‡∏ö‡∏ô‡∏ú‡∏¥‡∏ß‡∏ú‡∏• ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ú‡∏•‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢</div>
                    <div class="disease-tags">
                        <span class="tag pathogen">Conogethes punctiferalis</span>
                        <span class="tag">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="diseaseModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">-</h2>
                <p id="modalTitleEn">-</p>
            </div>
            <div class="modal-body">
                <!-- Disease Image -->
                <div class="disease-image-container" id="modalImageContainer" style="display: none; margin-bottom: 16px;">
                    <img id="modalImage" src="" alt="‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÇ‡∏£‡∏Ñ"
                         style="width: 100%; height: 200px; object-fit: cover; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                </div>
                <div class="detail-section">
                    <div class="detail-title">üî¨ ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏</div>
                    <div class="detail-content" id="modalPathogen">-</div>
                </div>
                <div class="detail-section">
                    <div class="detail-title">üîç ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</div>
                    <ul class="detail-list" id="modalSymptoms"><li>-</li></ul>
                </div>
                <div class="detail-section">
                    <div class="detail-title">üõ°Ô∏è ‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏Å‡∏©‡∏≤</div>
                    <ul class="detail-list" id="modalTreatment"><li>-</li></ul>
                </div>
                <div class="detail-section">
                    <div class="detail-title">üíä ‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</div>
                    <div class="detail-content" id="modalProducts">-</div>
                    <button id="modalProductLink" onclick="showProductImage()"
                       style="display: none; margin-top: 10px; color: #8b7355; font-weight: 600;
                              background: #f5f0e8; padding: 10px 18px; border-radius: 10px; border: none;
                              cursor: pointer; font-family: 'Sarabun', sans-serif; font-size: 0.95em;">
                        üì∑ ‡∏î‡∏π‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                    </button>
                </div>
                <div class="detail-section" id="videoSection" style="display: none;">
                    <div class="detail-title">üé¨ ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠</div>
                    <button id="modalVideoLink" onclick="openVideo()"
                       style="margin-top: 8px; color: #c62828; font-weight: 600;
                              background: #ffebee; padding: 10px 18px; border-radius: 10px; border: none;
                              cursor: pointer; font-family: 'Sarabun', sans-serif; font-size: 0.95em;">
                        ‚ñ∂Ô∏è ‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn close" onclick="closeModal()">‡∏õ‡∏¥‡∏î</button>
                <button class="modal-btn primary" onclick="shareDisease()">‡πÅ‡∏ä‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
            </div>
        </div>
    </div>

    <!-- Product Image Modal -->
    <div class="modal" id="productModal" onclick="if(event.target===this)closeProductModal()">
        <div style="position: relative; max-width: 95%; max-height: 90vh; margin: auto;">
            <button onclick="closeProductModal()"
                style="position: absolute; top: -15px; right: -15px; z-index: 10;
                       background: rgba(0,0,0,0.7); color: white; border: none;
                       width: 36px; height: 36px; border-radius: 50%; font-size: 1.3em;
                       cursor: pointer;">‚úï</button>
            <button id="prevBtn" onclick="prevImage()"
                style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); z-index: 10;
                       background: rgba(0,0,0,0.5); color: white; border: none;
                       width: 40px; height: 40px; border-radius: 50%; font-size: 1.3em;
                       cursor: pointer; display: none;">‚Äπ</button>
            <button id="nextBtn" onclick="nextImage()"
                style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); z-index: 10;
                       background: rgba(0,0,0,0.5); color: white; border: none;
                       width: 40px; height: 40px; border-radius: 50%; font-size: 1.3em;
                       cursor: pointer; display: none;">‚Ä∫</button>
            <img id="productImage" src="" alt="‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"
                 style="max-width: 100%; max-height: 75vh; display: block; border-radius: 12px;
                        background: #f5f5f5; object-fit: contain;">
            <div id="imageCounter"
                 style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%);
                        background: rgba(0,0,0,0.6); color: white; padding: 5px 15px;
                        border-radius: 15px; font-size: 0.9em; display: none;">1 / 1</div>
        </div>
    </div>

    <div class="footer">
        <div class="footer-content">
            <button class="footer-btn secondary" onclick="goBack()" style="flex: 1;">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
        </div>
    </div>

    <script>
        const LIFF_ID = '2008723334-HDSdj0iu';
        const diseaseData = {
            phytophthora: {
                name: "‡πÇ‡∏£‡∏Ñ‡∏£‡∏≤‡∏Å‡πÄ‡∏ô‡πà‡∏≤‡πÇ‡∏Ñ‡∏ô‡πÄ‡∏ô‡πà‡∏≤", nameEn: "Phytophthora Root Rot",
                image: "https://fwzdgzpuajcsigwlyojr.supabase.co/storage/v1/object/public/disease-image/durian/Phytophthora%20Root%20Rot.jpg",
                pathogen: "‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤ Phytophthora palmivora",
                symptoms: ["‡∏£‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡πÇ‡∏Ñ‡∏ô‡∏ï‡πâ‡∏ô‡πÄ‡∏ô‡πà‡∏≤‡∏î‡∏≥ ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏≠‡∏Å", "‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏¢‡∏¥‡πâ‡∏°‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÅ‡∏î‡∏á‡πÑ‡∏´‡∏•‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏≠‡∏¢‡πÅ‡∏ú‡∏•", "‡πÉ‡∏ö‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏£‡πà‡∏ß‡∏á ‡∏ï‡πâ‡∏ô‡πÇ‡∏ó‡∏£‡∏°", "‡∏≠‡∏≤‡∏à‡∏ï‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏ï‡πâ‡∏ô‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏£‡∏±‡∏Å‡∏©‡∏≤"],
                treatment: ["‡∏Ç‡∏∏‡∏î‡∏£‡πà‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ô‡πâ‡∏≥‡∏Ç‡∏±‡∏á", "‡∏ó‡∏≤‡∏¢‡∏≤‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤‡∏ó‡∏µ‡πà‡πÇ‡∏Ñ‡∏ô‡∏ï‡πâ‡∏ô", "‡∏ï‡∏±‡∏î‡πÅ‡∏ï‡πà‡∏á‡∏£‡∏≤‡∏Å‡πÄ‡∏ô‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏ó‡∏≤‡∏õ‡∏π‡∏ô‡πÅ‡∏î‡∏á‡∏ú‡∏™‡∏°‡∏¢‡∏≤‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤", "‡∏û‡πà‡∏ô‡∏¢‡∏≤ Metalaxyl ‡∏´‡∏£‡∏∑‡∏≠ Fosetyl-al"],
                products: "‡∏Ñ‡∏≤‡∏£‡∏¥‡∏™‡∏°‡∏≤ (‡∏£‡∏≤‡∏î‡πÇ‡∏Ñ‡∏ô ) , ‡πÇ‡∏ó‡∏°‡∏≤‡∏Æ‡∏≠‡∏Ñ(‡∏û‡πà‡∏ô‡∏ó‡∏≤‡∏á‡πÉ‡∏ö), ‡πÑ‡∏ã‡∏°‡πä‡∏≠‡∏Å‡∏ã‡∏¥‡πÄ‡∏°‡∏ó(‡∏û‡πà‡∏ô‡∏ó‡∏≤‡∏á‡πÉ‡∏ö),",
                productImage: "https://scontent.fbkk5-3.fna.fbcdn.net/v/t39.30808-6/484872434_1048316707321121_158349589531389043_n.jpg?_nc_cat=111&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeH-JIoLVio47-3QmfJvRGbeOpAFTfnI8i06kAVN-cjyLTrfSkOcIPobq1zNtiBUrp1SiFxn6zM2YWm-KpUuqB-b&_nc_ohc=N7KQ2mHYqngQ7kNvwFcJcZq&_nc_oc=Adn8Wtj42OfMva8Pdy3II8W7ZpkJd3w54zr38DU4m7KkgB1NzYkxG9B5N_yN8_a9ITY&_nc_zt=23&_nc_ht=scontent.fbkk5-3.fna&_nc_gid=mECVTESzdgQ7P5i_wpybtg&oh=00_Afr1j99EU0DSNiNHjnBWQ8oE7K05Ocu3ZKbY0rDxw-n1wA&oe=6966A4D2",
                videoUrl: ""
            },
            anthracnose: {
                name: "‡πÇ‡∏£‡∏Ñ‡πÅ‡∏≠‡∏ô‡πÅ‡∏ó‡∏£‡∏Ñ‡πÇ‡∏ô‡∏™", nameEn: "Anthracnose",
                image: "https://fwzdgzpuajcsigwlyojr.supabase.co/storage/v1/object/public/disease-image/durian/Anthracnose.jpg",
                pathogen: "‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤ Colletotrichum gloeosporioides",
                symptoms: ["‡∏à‡∏∏‡∏î‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏î‡∏≥‡∏ö‡∏ô‡πÉ‡∏ö ‡∏Ç‡∏≠‡∏ö‡πÅ‡∏ú‡∏•‡∏ä‡∏±‡∏î", "‡∏ú‡∏•‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏∏‡∏î‡∏î‡∏≥‡∏¢‡∏∏‡∏ö‡∏ï‡∏±‡∏ß ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô", "‡∏°‡∏µ‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ä‡∏∑‡πâ‡∏ô", "‡∏î‡∏≠‡∏Å‡∏£‡πà‡∏ß‡∏á ‡∏ú‡∏•‡∏≠‡πà‡∏≠‡∏ô‡∏£‡πà‡∏ß‡∏á"],
                treatment: ["‡∏ï‡∏±‡∏î‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏¥‡πà‡∏á‡πÉ‡∏´‡πâ‡πÇ‡∏õ‡∏£‡πà‡∏á", "‡∏û‡πà‡∏ô‡∏¢‡∏≤‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å‡∏î‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ú‡∏•", "‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏£‡∏Ñ", "‡∏û‡πà‡∏ô‡∏¢‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏° Mancozeb, Carbendazim"],
                products: "‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏ó‡∏°‡∏¥‡∏™ Difenoconazole + Azoxystrobin 12.5%+20% W/V SC ,‡πÇ‡∏Ñ-‡∏£‡∏≤‡∏ã, PROCHLORAZ 45% W/V EW ,‡∏™‡∏π‡∏ï‡∏£ EW ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏ï‡πà‡∏≠‡∏î‡∏≠‡∏Å ‡πÄ‡∏î‡πà‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÇ‡∏£‡∏Ñ ‡πÅ‡∏≠‡∏ô‡πÅ‡∏ó‡∏£‡∏Ñ‡πÇ‡∏ô‡∏™",
                productImage: "https://scontent.fbkk5-7.fna.fbcdn.net/v/t39.30808-6/486616929_1057672616385530_8694889675942054777_n.jpg?_nc_cat=107&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeE5soWz9V4yftTE6mN4i8uP4DJlfxWtIkHgMmV_Fa0iQVcV6pUS3HDS34aZYyouwWGw3CTn53JH5aDAXcMgBc6h&_nc_ohc=JgY8p5vULcwQ7kNvwFibCi4&_nc_oc=AdnPfC1GBln6PV-UEyDp3haD7tJ9_iKpKFbM-UkHu5NShrp4DYgtPT4t1Y-3yHGaT_Y&_nc_zt=23&_nc_ht=scontent.fbkk5-7.fna&_nc_gid=L_WxhHB05qpHR5gwPfslbA&oh=00_AfoS8feGHbU3M-qYS2KDwVyuZFgTDM364azs8ZvuCOtxNQ&oe=696D349C",
                productImage2: "https://scontent.fbkk5-4.fna.fbcdn.net/v/t39.30808-6/487405932_1059636332855825_2794540640863654638_n.jpg?_nc_cat=103&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeFgUa4vlraajiq4DXk8VGUjcEnHkU7d-OdwSceRTt3456cTvPdltNLKbNqNheWzLZ38jqB4_PIgHfPEl0k6A7ST&_nc_ohc=JhNkjEtXQfoQ7kNvwHIY_Ts&_nc_oc=Adkz5S94K2ZF99whGenMugtqJ32ADgZc2_sHgd3ptkjgdrqCCZLq7ncxo4tVi6hrf5s&_nc_zt=23&_nc_ht=scontent.fbkk5-4.fna&_nc_gid=p8TbwU_HlfDkJ2rBtYenDg&oh=00_Afohk71C9ZWsZVz66Qjf88_F7SCSJ0v_DHO1090aSRythw&oe=6973E92A",
                videoUrl: "https://www.facebook.com/share/r/16826tVF63/"
            },
            algal_spot: {
                name: "‡πÇ‡∏£‡∏Ñ‡∏à‡∏∏‡∏î‡∏™‡∏≤‡∏´‡∏£‡πà‡∏≤‡∏¢,‡πÉ‡∏ö‡∏à‡∏∏‡∏î‡∏™‡∏ô‡∏¥‡∏°", nameEn: "Algal Leaf Spot",
                image: "https://fwzdgzpuajcsigwlyojr.supabase.co/storage/v1/object/public/disease-image/durian/Algal%20Leaf%20Spot.jpg",
                pathogen: "‡∏™‡∏≤‡∏´‡∏£‡πà‡∏≤‡∏¢ Cephaleuros virescens",
                symptoms: ["‡∏à‡∏∏‡∏î‡∏Å‡∏•‡∏°‡∏ô‡∏π‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏ó‡∏≤‡∏ö‡∏ô‡πÉ‡∏ö", "‡∏ú‡∏¥‡∏ß‡∏´‡∏¢‡∏≤‡∏ö‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏Å‡∏≥‡∏°‡∏∞‡∏´‡∏¢‡∏µ‡πà", "‡∏û‡∏ö‡∏°‡∏≤‡∏Å‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏£‡πà‡∏°‡∏ä‡∏∑‡πâ‡∏ô", "‡πÑ‡∏°‡πà‡∏Ñ‡πà‡∏≠‡∏¢‡∏™‡πà‡∏á‡∏ú‡∏•‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á"],
                treatment: ["‡∏ï‡∏±‡∏î‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏¥‡πà‡∏á‡πÉ‡∏´‡πâ‡πÇ‡∏õ‡∏£‡πà‡∏á ‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏á", "‡∏û‡πà‡∏ô‡∏¢‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á", "‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏ä‡∏∑‡πâ‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ"],
                products: "‡πÇ‡∏Ñ-‡∏£‡∏≤‡∏ã PROCHLORAZ 45% W/V EW(‡∏ú‡∏™‡∏°‡∏ô‡πâ‡∏≥‡∏â‡∏µ‡∏î‡∏û‡πà‡∏ô‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì ‡∏î‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏≠‡πà‡∏≠‡∏ô), ‡πÑ‡∏ã‡∏°‡πä‡∏≠‡∏Å‡∏ã‡∏¥‡πÄ‡∏°‡∏ó, Cymoxanil + Mancozeb 8% + 64% WP",
                productImage: "https://scontent.fbkk5-3.fna.fbcdn.net/v/t39.30808-6/484872434_1048316707321121_158349589531389043_n.jpg?_nc_cat=111&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeH-JIoLVio47-3QmfJvRGbeOpAFTfnI8i06kAVN-cjyLTrfSkOcIPobq1zNtiBUrp1SiFxn6zM2YWm-KpUuqB-b&_nc_ohc=N7KQ2mHYqngQ7kNvwFcJcZq&_nc_oc=Adn8Wtj42OfMva8Pdy3II8W7ZpkJd3w54zr38DU4m7KkgB1NzYkxG9B5N_yN8_a9ITY&_nc_zt=23&_nc_ht=scontent.fbkk5-3.fna&_nc_gid=HrwUdfbppatoHYhhTQAb3Q&oh=00_AfrvgrM1l6tC5U5SV3YKw4fK_NzGyNnGccl91cZJJLe8uQ&oe=6966A4D2",
                videoUrl: ""
            },
            pink_disease: {
                name: "‡πÇ‡∏£‡∏Ñ‡∏£‡∏≤‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π", nameEn: "Pink Disease",
                image: "https://fwzdgzpuajcsigwlyojr.supabase.co/storage/v1/object/public/disease-image/durian/Pink%20Disease.jpg",
                pathogen: "‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤ Erythricium salmonicolor",
                symptoms: ["‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏¥‡πà‡∏á‡∏°‡∏µ‡πÄ‡∏™‡πâ‡∏ô‡πÉ‡∏¢‡∏£‡∏≤‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π‡∏õ‡∏Å‡∏Ñ‡∏•‡∏∏‡∏°", "‡∏Å‡∏¥‡πà‡∏á‡πÅ‡∏´‡πâ‡∏á‡∏ï‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏õ‡∏•‡∏≤‡∏¢", "‡∏°‡∏±‡∏Å‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ù‡∏ô‡∏ä‡∏∏‡∏Å", "‡∏ï‡πâ‡∏ô‡∏≠‡πà‡∏≠‡∏ô‡πÅ‡∏≠ ‡πÉ‡∏ö‡∏£‡πà‡∏ß‡∏á"],
                treatment: ["‡∏ï‡∏±‡∏î‡∏Å‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏£‡∏Ñ‡∏≠‡∏≠‡∏Å‡πÄ‡∏ú‡∏≤‡∏ó‡∏≥‡∏•‡∏≤‡∏¢", "‡∏ó‡∏≤‡∏¢‡∏≤‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏£‡∏≠‡∏¢‡∏ï‡∏±‡∏î", "‡∏û‡πà‡∏ô‡∏¢‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á‡∏´‡∏£‡∏∑‡∏≠ Validamycin"],
                products: "‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏ó‡∏°‡∏¥‡∏™ Difenoconazole + Azoxystrobin 12.5%+20% W/V SC",
                productImage: "https://scontent.fbkk5-8.fna.fbcdn.net/v/t39.30808-6/527993689_1159908936161897_1146916638933539114_n.jpg?stp=dst-jpg_s640x640_tt6&_nc_cat=106&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeE4UzN0VYWd5DXyZi8GJb4TCPe_TxaYVp0I979PFphWnSMF1AiHA5XpDMAafKKqgbmSBkBCausytu-xsSTIIlk9&_nc_ohc=cQrWxW0GgxwQ7kNvwHa7aNR&_nc_oc=Adk7TL3FAhA0CM1D1pZiSI3t-dEihwdiJaFLu_9TES2ayabq-Yj0lG575Vxai3olVtw&_nc_zt=23&_nc_ht=scontent.fbkk5-8.fna&_nc_gid=5TfGZ6mvPtzxis3MGCr98A&oh=00_Afoc-cN4LYUzZ_b4AdSscQNw1kAGE3Qhv4lFjdizdqG8Wg&oe=696D3CEA",
                videoUrl: ""
            },
            fruit_rot: {
                name: "‡πÇ‡∏£‡∏Ñ‡∏ú‡∏•‡πÄ‡∏ô‡πà‡∏≤", nameEn: "Fruit Rot",
                image: "https://fwzdgzpuajcsigwlyojr.supabase.co/storage/v1/object/public/disease-image/durian/Fruit%20Rot.jpg",
                pathogen: "‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤ Phytophthora spp., Lasiodiplodia spp.",
                symptoms: ["‡∏ú‡∏•‡πÄ‡∏ô‡πà‡∏≤‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏î‡∏≥ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏•‡∏≤‡∏¢", "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏ô‡πà‡∏≤‡πÄ‡∏•‡∏∞ ‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÄ‡∏´‡∏°‡πá‡∏ô", "‡∏°‡∏±‡∏Å‡πÄ‡∏Å‡∏¥‡∏î‡∏´‡∏•‡∏±‡∏á‡∏ù‡∏ô‡∏ï‡∏Å‡∏´‡∏ô‡∏±‡∏Å", "‡πÅ‡∏û‡∏£‡πà‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏ä‡∏∑‡πâ‡∏ô"],
                treatment: ["‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡πÄ‡∏ô‡πà‡∏≤‡∏ó‡∏¥‡πâ‡∏á‡πÄ‡∏ú‡∏≤‡∏ó‡∏≥‡∏•‡∏≤‡∏¢", "‡∏û‡πà‡∏ô‡∏¢‡∏≤‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ú‡∏•‡∏≠‡πà‡∏≠‡∏ô", "‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ô‡πâ‡∏≥‡∏Ç‡∏±‡∏á‡πÉ‡∏ï‡πâ‡∏ï‡πâ‡∏ô", "‡∏´‡πà‡∏≠‡∏ú‡∏•‡∏î‡πâ‡∏ß‡∏¢‡∏ñ‡∏∏‡∏á‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©"],
                products: "‡πÑ‡∏ã‡∏°‡πä‡∏≠‡∏Å‡∏ã‡∏¥‡πÄ‡∏°‡∏ó(‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÉ‡∏ö‡πÅ‡∏•‡∏∞‡∏•‡∏≥‡∏ï‡πâ‡∏ô) , ‡∏Ñ‡∏≤‡∏£‡∏¥‡∏™‡∏°‡∏≤ (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏Ñ‡∏ô‡∏ï‡πâ‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏∏‡∏Å‡∏•‡∏≤‡∏°)  ",
                productImage: "https://scontent.fbkk5-3.fna.fbcdn.net/v/t39.30808-6/594194977_1260221996130590_3219186708295422281_n.jpg?stp=dst-jpg_p526x296_tt6&_nc_cat=105&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeFAAxi3GpuOpxiNKTuZohuXnOAuxbsw1zCc4C7FuzDXMEH1USoPc8nYoDo_gzb-HWGcsizdZyVo6yj-NC_aMzuj&_nc_ohc=hZFHEPb4Z4gQ7kNvwHyB4CI&_nc_oc=AdmLcx_1EFyNiVKn6xVJqr_bOmIl1P1DQTPwyvqqgnjZFsIO-H2zNqRZ0zNOZSvjcoY&_nc_zt=23&_nc_ht=scontent.fbkk5-3.fna&_nc_gid=ovpepC-4t1n2AOPSkvqfyg&oh=00_Afri3V1KXcuSbmrHs7g7TdIjqxDsBqzWLHMN3tzarpSE8w&oe=69669559",
                videoUrl: ""
            },
             Durian_Leaf_Blight: {
                name: "‡πÇ‡∏£‡∏Ñ‡πÉ‡∏ö‡∏ï‡∏¥‡∏î ‡∏´‡∏£‡∏∑‡∏≠ ‡πÇ‡∏£‡∏Ñ‡πÉ‡∏ö‡πÑ‡∏´‡∏°‡πâ",nameEn: "Durian Leaf Blight",
                image: "https://fwzdgzpuajcsigwlyojr.supabase.co/storage/v1/object/public/disease-image/durian/Durian%20Leaf%20Blight.jpg",
                pathogen: "‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤ Rhizoctonia solani",
                symptoms: [ "‡πÉ‡∏ö‡πÄ‡∏Å‡∏¥‡∏î‡πÅ‡∏ú‡∏•‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÑ‡∏´‡∏°‡πâ","‡πÅ‡∏ú‡∏•‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏£‡πá‡∏ß ‡πÉ‡∏ö‡πÅ‡∏´‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏£‡πà‡∏ß‡∏á", "‡πÉ‡∏ö‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏£‡∏∞‡∏à‡∏∏‡∏Å ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ä‡πà‡∏ß‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ä‡∏∑‡πâ‡∏ô" ],
                treatment: [ "‡∏ï‡∏±‡∏î‡πÉ‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏£‡∏Ñ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏•‡∏≤‡∏¢", "‡∏ï‡∏±‡∏î‡πÅ‡∏ï‡πà‡∏á‡∏ó‡∏£‡∏á‡∏û‡∏∏‡πà‡∏°‡πÉ‡∏´‡πâ‡πÇ‡∏õ‡∏£‡πà‡∏á ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô", "‡∏û‡πà‡∏ô‡∏™‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏¢‡∏≤" ],
                products: "‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏ó‡∏°‡∏¥‡∏™ Difenoconazole + Azoxystrobin 12.5%+20% W/V SC",
                productImage: "https://scontent.fbkk5-3.fna.fbcdn.net/v/t39.30808-6/489845148_1070322481787210_5177090310035499039_n.jpg?_nc_cat=105&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeFP6iw8_0dzNPlM9Oq4wVOcJC5PLcodT0IkLk8tyh1PQqB0F4ywcpmGQua31GA-b1pbZHDZ7UqYTnOGeHOgx2oH&_nc_ohc=mKFzAumvWfUQ7kNvwHshfCM&_nc_oc=AdlyagRyawmGZoNH4hBwmCmhlvxF9b1uMDnjWpeC5x7fEDAxRYqZcfB9noxoT4N2eYE&_nc_zt=23&_nc_ht=scontent.fbkk5-3.fna&_nc_gid=fgy3-MTWJ1utqt2lNM02SQ&oh=00_AfrE4IcO9Qr5Eb2TyKv5KgoDP_1d4y-538F6JPN-qrkNKg&oe=6966A622",
                videoUrl: "https://www.facebook.com/share/r/16826tVF63/"
            },
            branch_dieback: {
                name: "‡πÇ‡∏£‡∏Ñ‡∏Å‡∏¥‡πà‡∏á‡πÅ‡∏´‡πâ‡∏á‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô", nameEn: "Branch Dieback",
                image: "https://fwzdgzpuajcsigwlyojr.supabase.co/storage/v1/object/public/disease-image/durian/Branch%20Dieback.png",
                pathogen: "‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤ Fusarium solani",
                symptoms: ["‡∏Å‡∏¥‡πà‡∏á‡πÅ‡∏´‡πâ‡∏á‡∏ï‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏õ‡∏•‡∏≤‡∏¢‡∏Å‡∏¥‡πà‡∏á", "‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏¥‡πà‡∏á‡πÅ‡∏´‡πâ‡∏á‡∏Å‡∏£‡∏≠‡∏ö ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ", "‡πÉ‡∏ö‡πÄ‡∏´‡∏µ‡πà‡∏¢‡∏ß‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏£‡πà‡∏ß‡∏á", "‡∏≠‡∏≤‡∏à‡∏•‡∏∏‡∏Å‡∏•‡∏≤‡∏°‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Å‡∏¥‡πà‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏•‡∏≥‡∏ï‡πâ‡∏ô"],
                treatment: ["‡∏ï‡∏±‡∏î‡∏Å‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏£‡∏Ñ‡∏≠‡∏≠‡∏Å ‡∏ï‡∏±‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏¢‡πÅ‡∏ú‡∏• 15-20 ‡∏ã‡∏°.", "‡∏ó‡∏≤‡∏¢‡∏≤‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏¢‡∏ï‡∏±‡∏î", "‡∏û‡πà‡∏ô‡∏™‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠", "‡∏ï‡∏±‡∏î‡πÅ‡∏ï‡πà‡∏á‡∏ó‡∏£‡∏á‡∏û‡∏∏‡πà‡∏°‡πÉ‡∏´‡πâ‡πÇ‡∏õ‡∏£‡πà‡∏á ‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏î‡∏µ"],
                products: "‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏ó‡∏°‡∏¥‡∏™ Difenoconazole + Azoxystrobin 12.5%+20% W/V SC",
                productImage: "https://scontent.fbkk5-8.fna.fbcdn.net/v/t39.30808-6/527993689_1159908936161897_1146916638933539114_n.jpg?stp=dst-jpg_s640x640_tt6&_nc_cat=106&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeE4UzN0VYWd5DXyZi8GJb4TCPe_TxaYVp0I979PFphWnSMF1AiHA5XpDMAafKKqgbmSBkBCausytu-xsSTIIlk9&_nc_ohc=cQrWxW0GgxwQ7kNvwHa7aNR&_nc_oc=Adk7TL3FAhA0CM1D1pZiSI3t-dEihwdiJaFLu_9TES2ayabq-Yj0lG575Vxai3olVtw&_nc_zt=23&_nc_ht=scontent.fbkk5-8.fna&_nc_gid=5TfGZ6mvPtzxis3MGCr98A&oh=00_Afoc-cN4LYUzZ_b4AdSscQNw1kAGE3Qhv4lFjdizdqG8Wg&oe=696D3CEA",
                videoUrl: "https://www.facebook.com/share/r/16826tVF63/"
            },
            mosaic: {
                name: "‡πÇ‡∏£‡∏Ñ‡πÉ‡∏ö‡∏î‡πà‡∏≤‡∏á", nameEn: "Mosaic Virus",
                image: "https://fwzdgzpuajcsigwlyojr.supabase.co/storage/v1/object/public/disease-image/durian/Mosaic%20Virus.jpg",
                pathogen: "Durian Mosaic Virus (DMV) - ‡∏û‡∏≤‡∏´‡∏∞: ‡πÄ‡∏û‡∏•‡∏µ‡πâ‡∏¢‡∏≠‡πà‡∏≠‡∏ô, ‡πÄ‡∏û‡∏•‡∏µ‡πâ‡∏¢‡πÅ‡∏õ‡πâ‡∏á, ‡πÄ‡∏û‡∏•‡∏µ‡πâ‡∏¢‡πÑ‡∏ü",
                symptoms: ["‡πÉ‡∏ö‡∏°‡∏µ‡∏•‡∏≤‡∏¢‡∏î‡πà‡∏≤‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏≠‡πà‡∏≠‡∏ô‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏Ç‡πâ‡∏°", "‡πÉ‡∏ö‡∏ö‡∏¥‡∏î‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ß ‡∏ú‡∏¥‡∏ß‡πÉ‡∏ö‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö", "‡∏ï‡πâ‡∏ô‡πÅ‡∏Ñ‡∏£‡∏∞‡πÅ‡∏Å‡∏£‡πá‡∏ô ‡πÇ‡∏ï‡∏ä‡πâ‡∏≤", "‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡∏•‡∏î‡∏•‡∏á"],
                treatment: ["‡∏ñ‡∏≠‡∏ô‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏£‡∏Ñ", "‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÄ‡∏û‡∏•‡∏µ‡πâ‡∏¢‡∏≠‡πà‡∏≠‡∏ô‡∏û‡∏≤‡∏´‡∏∞", "‡πÉ‡∏ä‡πâ‡∏Å‡∏¥‡πà‡∏á‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏à‡∏≤‡∏Å‡∏ï‡πâ‡∏ô‡πÅ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡πÇ‡∏£‡∏Ñ", "‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏∑‡∏ä‡∏Å‡∏µ‡∏î‡∏Ç‡∏ß‡∏≤‡∏á‡∏£‡∏≠‡∏ö‡πÅ‡∏õ‡∏•‡∏á"],
                products: "‡∏≠‡∏¥‡∏°‡∏¥‡∏î‡∏≤‡πÇ‡∏Å‡∏•‡∏î‡πå 70 (‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÄ‡∏û‡∏•‡∏µ‡πâ‡∏¢)",
                productImage: "https://scontent.fbkk5-3.fna.fbcdn.net/v/t1.6435-9/69165558_2389830731084827_5698185402830028800_n.jpg?_nc_cat=111&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeG_9qwWXStVuJy1T912zN3Jr1cpFUw_ceKvVykVTD9x4p7IRQawBw0EsKR_vuxeNKeBTrqFM2AssbE0EU-iu6Gn&_nc_ohc=Hpq6cmWCCQUQ7kNvwG0wgg1&_nc_oc=AdmHhLl5-sWy2lcnk3ZezhNunAB-xTcG4hLD-GSKAXQhB4sXPQo5f8dhmsPbep494vw&_nc_zt=23&_nc_ht=scontent.fbkk5-3.fna&_nc_gid=2QHUkXDWCoMhLRayGYrBRw&oh=00_AfqbGOD0Pc9phEsh9jacGWl9pYeQvsgnix9M-bNhAP1Niw&oe=69882426",
                videoUrl: ""
            },
            fruit_borer: {
                name: "‡∏´‡∏ô‡∏≠‡∏ô‡πÄ‡∏à‡∏≤‡∏∞‡∏ú‡∏•‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô", nameEn: "Durian Fruit Borer",
                image: "https://fwzdgzpuajcsigwlyojr.supabase.co/storage/v1/object/public/disease-image/durian/Durian%20Fruit%20Borer.png",
                pathogen: "‡∏´‡∏ô‡∏≠‡∏ô‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠ Conogethes punctiferalis (Durian Fruit Borer Moth)",
                symptoms: ["‡∏ú‡∏•‡∏ñ‡∏π‡∏Å‡πÄ‡∏à‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å", "‡∏°‡∏µ‡∏°‡∏π‡∏•‡∏´‡∏ô‡∏≠‡∏ô‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏ö‡∏ô‡∏ú‡∏¥‡∏ß‡∏ú‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏≤‡∏°‡∏£‡∏≠‡∏¢‡πÄ‡∏à‡∏≤‡∏∞", "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ú‡∏•‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ ‡πÄ‡∏ô‡πà‡∏≤‡πÄ‡∏™‡∏µ‡∏¢", "‡∏ú‡∏•‡∏£‡πà‡∏ß‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏•‡∏î‡∏•‡∏á", "‡∏û‡∏ö‡∏´‡∏ô‡∏≠‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡∏≠‡∏°‡∏ä‡∏°‡∏û‡∏π‡πÉ‡∏ô‡∏ú‡∏•"],
                treatment: ["‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏™‡∏ß‡∏ô‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠ ‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡πÑ‡∏õ‡πÄ‡∏ú‡∏≤", "‡∏´‡πà‡∏≠‡∏ú‡∏•‡∏î‡πâ‡∏ß‡∏¢‡∏ñ‡∏∏‡∏á‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡∏∏‡∏á‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏à‡∏≤‡∏∞‡∏£‡∏π", "‡∏û‡πà‡∏ô‡∏™‡∏≤‡∏£‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÅ‡∏°‡∏•‡∏á‡∏ä‡πà‡∏ß‡∏á‡∏ï‡∏¥‡∏î‡∏ú‡∏•‡∏≠‡πà‡∏≠‡∏ô", "‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏î‡∏±‡∏Å‡πÅ‡∏™‡∏á‡πÑ‡∏ü‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ï‡∏±‡∏ß‡πÄ‡∏ï‡πá‡∏°‡∏ß‡∏±‡∏¢", "‡∏ï‡∏±‡∏î‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏¥‡πà‡∏á‡πÉ‡∏´‡πâ‡πÇ‡∏õ‡∏£‡πà‡∏á ‡∏•‡∏î‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏ö‡∏ã‡πà‡∏≠‡∏ô"],
                products: "‡πÑ‡∏Æ‡∏ã‡∏µ‡∏™ (EMAMECTIN BENZOATE 2.0% W/V ME),",
                productImage: "https://scontent.fbkk5-7.fna.fbcdn.net/v/t1.6435-9/72273208_2468208306580402_8813792603909652480_n.jpg?_nc_cat=107&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeEn_w5rv6S7TYhB6fAxxanDyWpFrWuqcpLJakWta6pykrq9wUdREaJVQ5n-gxl5bXGC3hzryLqAqRxTmWjCYgpg&_nc_ohc=UJT5jXvT20UQ7kNvwFQ7Xhy&_nc_oc=Adlc4yo729vL07-de-ZLN9iwJm84S2KyeAeJIWJdyTtpe79OfhkTlg7Cd6ezCqTanrs&_nc_zt=23&_nc_ht=scontent.fbkk5-7.fna&_nc_gid=iRbU0nXcguvcBVxY4Isj1Q&oh=00_AfpcUP5E0qjY8I7rxxt_ksL1o7iJacZ9mUBVewIDLSzPPw&oe=69882DAB",
                videoUrl: ""
            }
        };
        let currentDisease = null;

        document.addEventListener('DOMContentLoaded', async () => {
            try { await liff.init({ liffId: LIFF_ID }); } catch (e) { console.error(e); }
        });

        function showCategory(category) {
            document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.category-tab.${category}`).classList.add('active');
            document.querySelectorAll('.category-section').forEach(s => s.classList.remove('active'));
            document.getElementById(`${category}-section`).classList.add('active');
        }

        function showDetail(key) {
            const d = diseaseData[key]; if (!d) return;
            currentDisease = d;

            // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
            const imageContainer = document.getElementById('modalImageContainer');
            const imageElement = document.getElementById('modalImage');
            if (d.image && d.image.trim() !== '') {
                imageElement.src = d.image;
                imageElement.alt = d.name;
                imageContainer.style.display = 'block';
            } else {
                imageContainer.style.display = 'none';
            }

            document.getElementById('modalTitle').textContent = d.name;
            document.getElementById('modalTitleEn').textContent = d.nameEn;
            document.getElementById('modalPathogen').textContent = d.pathogen;
            document.getElementById('modalSymptoms').innerHTML = d.symptoms.map(s => `<li>${s}</li>`).join('');
            document.getElementById('modalTreatment').innerHTML = d.treatment.map(t => `<li>${t}</li>`).join('');
            document.getElementById('modalProducts').textContent = d.products;

            // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏π‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á array ‡πÅ‡∏•‡∏∞ string)
            const productLink = document.getElementById('modalProductLink');
            let hasProductImage = false;
            if (d.productImage) {
                if (Array.isArray(d.productImage) && d.productImage.length > 0) {
                    productLink.dataset.imageUrls = JSON.stringify(d.productImage);
                    hasProductImage = true;
                } else if (typeof d.productImage === 'string' && d.productImage.trim() !== '') {
                    productLink.dataset.imageUrls = JSON.stringify([d.productImage]);
                    hasProductImage = true;
                }
            }
            productLink.style.display = hasProductImage ? 'inline-block' : 'none';

            // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
            const videoSection = document.getElementById('videoSection');
            const videoLink = document.getElementById('modalVideoLink');
            if (d.videoUrl && d.videoUrl.trim() !== '') {
                videoLink.dataset.videoUrl = d.videoUrl;
                videoSection.style.display = 'block';
            } else {
                videoSection.style.display = 'none';
            }

            document.getElementById('diseaseModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Gallery state
        let productImages = [];
        let currentImageIndex = 0;

        function showProductImage() {
            const productLink = document.getElementById('modalProductLink');
            const imageUrlsJson = productLink.dataset.imageUrls;
            if (imageUrlsJson) {
                productImages = JSON.parse(imageUrlsJson);
                currentImageIndex = 0;
                updateProductImage();
                document.getElementById('productModal').classList.add('active');
            }
        }

        function updateProductImage() {
            document.getElementById('productImage').src = productImages[currentImageIndex];
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const counter = document.getElementById('imageCounter');
            if (productImages.length > 1) {
                prevBtn.style.display = currentImageIndex > 0 ? 'block' : 'none';
                nextBtn.style.display = currentImageIndex < productImages.length - 1 ? 'block' : 'none';
                counter.style.display = 'block';
                counter.textContent = `${currentImageIndex + 1} / ${productImages.length}`;
            } else {
                prevBtn.style.display = 'none';
                nextBtn.style.display = 'none';
                counter.style.display = 'none';
            }
        }

        function prevImage() {
            if (currentImageIndex > 0) { currentImageIndex--; updateProductImage(); }
        }

        function nextImage() {
            if (currentImageIndex < productImages.length - 1) { currentImageIndex++; updateProductImage(); }
        }

        function closeProductModal() {
            document.getElementById('productModal').classList.remove('active');
            document.getElementById('productImage').src = '';
            productImages = [];
            currentImageIndex = 0;
        }

        function openVideo() {
            const videoLink = document.getElementById('modalVideoLink');
            const videoUrl = videoLink.dataset.videoUrl;
            if (videoUrl) {
                window.open(videoUrl, '_blank');
            }
        }

        function closeModal() { document.getElementById('diseaseModal').classList.remove('active'); document.body.style.overflow = ''; }
        function goBack() { window.location.href = '/liff/diseases'; }
        function openCamera() { if (liff.isInClient()) liff.closeWindow(); else alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô LINE app'); }
        function shareDisease() {
            if (!currentDisease) return;
            const text = `ü•≠ ${currentDisease.name} (${currentDisease.nameEn})\nüî¨ ${currentDisease.pathogen}\n\n‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ó‡∏µ‡πà ICP Ladda Bot`;
            if (liff.isApiAvailable('shareTargetPicker')) liff.shareTargetPicker([{type:'text',text}]).catch(()=>fallbackShare(text));
            else fallbackShare(text);
        }
        function fallbackShare(t) { if(navigator.share) navigator.share({title:'‡πÇ‡∏£‡∏Ñ‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô',text:t}); else navigator.clipboard.writeText(t).then(()=>alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß')); }
        document.getElementById('diseaseModal').addEventListener('click', function(e) { if (e.target === this) closeModal(); });
    </script>
</body>
</html>
